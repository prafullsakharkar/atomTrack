<!DOCTYPE html>
<html lang="en">
{% include "header.html" %}
<body>
{% include "top_bar.html" %}
<div class="ch-container">
  <div class="row">
  </div>
  <!--/span-->
  <!-- left menu ends -->

  <noscript>
    <div class="alert alert-block col-md-12">
      <h4 class="alert-heading">Warning!</h4>

      <p>You need to have <a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank">JavaScript</a>
        enabled to use this site.</p>
    </div>
  </noscript>
  <div class="row">
    <div class="col-sm-1" id="task_menu1" style="display:none">
      <div class="sidebar-nav">
        <div class="nav-canvas">
          <ul class="nav nav-pills nav-stacked main-menu">
            <li class="nav-header"></li>
            <li class="nav-header"><img class="dashboard-avatar" alt="" src="http://192.168.1.18/Employees/{{emp_code}}.jpg"></li>
            <li class="nav-header">Main</li>
            {% if data.user_role == 'Supervisor' %}
	    <li id="mgm_dashboard_page"><a class="ajax-link" href="/mgm_dashboard"><i
              class="glyphicon glyphicon-dashboard"></i>&nbsp;&nbsp;<span> Management</span></a></li>
            <li class="active" id="dashboard_page"><a class="ajax-link" href="/dashboard"><i
              class="glyphicon glyphicon-dashboard"></i>&nbsp;&nbsp;<span> Dashboard</span></a></li>
            {% endif %}
            <li><a class="ajax-link" href="/tasks"><i
              class="glyphicon glyphicon-tasks"></i>&nbsp;&nbsp;<span> To Do List</span></a></li>
            <li><a class="ajax-link" href="/status"><i
              class="glyphicon glyphicon-th"></i><span>&nbsp;&nbsp; Task Status</span></a>
            </li>
            {% if data.user_role == 'Co-ordinator' or data.user_role == 'Supervisor' %}
            <li><a class="ajax-link" href="/review"><i
              class="glyphicon glyphicon-tasks"></i>&nbsp;&nbsp;<span> Review Tasks</span></a>
            <li><a class="ajax-link" href="/ftp"><i class="glyphicon glyphicon-cloud-upload"></i>&nbsp;&nbsp;<span> FTP Upload</span></a>
            </li>
            {% endif %}


          </ul>
        </div>
      </div>
    </div>

    <!-- left menu ends -->

    <div class="col-at-12" id="panel_big">

      <ul class="breadcrumb">
        <li>
          <a href="#">Main</a>
        </li>
        <li>
          <a href="#">Dashboard</a>
        </li>
      </ul>
      <div class="sidebar-nav">
        <div class="box-content row">
          <div class="box col-at-11">

            <div class="col-at-sm-3" style="display:block;">
              <div class="controls">
                <label class="control-label" for="selectDashProject">Projects : &nbsp;</label>
                <select id="selectDashProject" data-rel="chosen" style="width: 122px;">
                  {% for proj,id in data.projects.items %}
                  {% if data.reports.project == proj %}
                  <option value="{{id}}" selected>{{proj}}</option>
                  {% else %}
                  <option value="{{id}}">{{proj}}</option>
                  {% endif %}
                  {% endfor %}
                </select>
              </div>
            </div>
            <div class="col-at-sm-3" style="display:block;">
              <div class="controls">
                <label class="control-label" for="selectTask">Task : &nbsp;</label>
                <select id="selectTask" data-rel="chosen" style="width: 162px;">
                  <option value="all" selected>All</option>
                  {% for task in data.all_tasks %}
                  <option value="{{task}}">{{task}}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
	    <div class="col-at-3">
                <label class="control-label">Date Range : &nbsp;</label>
		<div id="reportrange" class="pull-right" style="cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; ">
    <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;
    <span></span> <b class="caret"></b>
</div>
	    </div>
<!--
            <div class="col-at-sm-3" style="display:block;">
              <div class="controls">
                <label class="control-label" for="selectDuration">Duration : &nbsp;</label>
                <select id="selectDuration" data-rel="chosen" style="width: 122px;">
                  {% for dur in data.durations %}
                  {% if data.reports.duration == dur %}
                  <option value="{{dur}}" selected>{{dur}}</option>
                  {% else %}
                  <option value="{{dur}}">{{dur}}</option>
                  {% endif %}
                  {% endfor %}
                </select>
              </div>
            </div>

            <div class="col-at-5" style="display:block;">
              <div class="controls">
                <label class="control-label">From : &nbsp;</label>
                <input id="from_date" class="x-form-field x-form-text x-form-empty-field" type="text"
                       value="{{data.reports.from_date}}" disabled>
              </div>
            </div>
            <div class="col-at-5" style="display:block;">
              <div class="controls">
                <label class="control-label">To : &nbsp;</label>
                <input id="to_date" class="x-form-field x-form-text x-form-empty-field"
                       value="{{data.reports.to_date}}" type="text" disabled>
              </div>
            </div>
-->
            <div class="col-at-5">
              <div class="controls pull-right">
                <button class="btn btn-inverse btn-default btn-sm" id="show_records">
                  <i class="glyphicon glyphicon-signal icon-white"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show Records
                </button>&nbsp;
              </div>
            </div>
          </div>

          <div class="box col-lg-9">
            <div class="box-header well">
              <h2><i class="glyphicon glyphicon-info-sign"></i> &nbsp; Report : User Task</h2>
              <div class="box-icon">
                <button class="btn btn-inverse btn-default btn-xs" id="download_user_task">
                  <i class="glyphicon glyphicon-save icon-white"></i></button>
                <input data-errorqtip="" aria-invalid="false" id="search"
                       data-qtip="Type to filter on task name or description"
                       placeholder="Type to search ..."
                       class="x-form-field x-form-text x-form-empty-field" autocomplete="off"
                       type="text" style="height: 23px; font-size: 10px;">
                <button class="btn btn-inverse btn-default btn-xs" id="clear_search"><i
                  class="glyphicon glyphicon-remove icon-remove"></i></button>
                &nbsp;<label id="table_row_count"></label>
              </div>
            </div>
            <div style="overflow:auto; overflow-y:auto; height:315px"
                 id="div_user_task_details">
              <table class="table-hover table-condensed table-bordered" id="tbl_task">
                <thead>
                <tr>
                  <th>Task Name</th>
                  <th style="width: 300px;">Task</th>
                  <th>User</th>
                  <th>Status</th>
                  <th>Start Date</th>
                  <th>Stop Date</th>
                  <th>Time Spend</th>
                </tr>
                </thead>

              </table>
            </div>

            <div class="box col-at-6">
              <div class="box-header well">
                <h2><i class="glyphicon glyphicon-info-sign"></i>&nbsp; Task Users Count</h2>
              </div>
              <div style="overflow:auto; overflow-y:auto; height:315px"
                   id="div_task_count">
                <table class="table table-striped table-hover" id="tbl_task_count">
                  <thead>
                  <tr>
                    <th>Count</th>
                    <th>Task Name</th>
                    <th>Time Spend</th>
                  </tr>
                  </thead>
                </table>

              </div>
            </div>
            <div class="box col-at-sm-7">
              <div class="box-header well">
                <h2><i class="glyphicon glyphicon-stats"></i>&nbsp; Graph : Task</h2>
              </div>
              <div style="overflow:auto; overflow-y:auto; height:315px"
                   id="chart_task_details">
              </div>
            </div>

            <div class="box col-at-6">
              <div class="box-header well">
                <h2><i class="glyphicon glyphicon-info-sign"></i>&nbsp; Task Status Count</h2>
              </div>
              <div style="overflow:auto; overflow-y:auto; height:315px"
                   id="div_status_count">
                <table class="table table-striped table-hover" id="tbl_status_count">
                  <thead>
                  <tr>
                    <th>Count</th>
                    <th>Staus</th>
                  </tr>
                  </thead>
                </table>
              </div>
            </div>
            <div class="box col-at-sm-7">
              <div class="box-header well">
                <h2><i class="glyphicon glyphicon-stats"></i>&nbsp; Graph : Status</h2>
              </div>
              <div style="overflow:auto; overflow-y:auto; height:315px"
                   id="chart_status_details">
              </div>
            </div>
          </div>
          <div class="box col-at-sm-6">
            <div class="box-header well">
              <h2><i class="glyphicon glyphicon-user"></i> &nbsp; Top Artists</h2>
            </div>
            <div style="overflow:auto; overflow-y:auto; height:1080px"
                 id="div_task_details">

            </div>
          </div>
          <div>

          </div>
        </div>
      </div>
    </div>
</body>


<!-- external javascript -->

<script src="/static/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<!--&lt;!&ndash; library for cookie management &ndash;&gt;-->
<script src="/static/js/jquery.cookie.js"></script>
<!--&lt;!&ndash; calender plugin &ndash;&gt;-->
<script src='/static/bower_components/moment/min/moment.min.js'></script>
<!--<script src='/static/bower_components/fullcalendar/dist/fullcalendar.min.js'></script>-->
<!--&lt;!&ndash; data table plugin &ndash;&gt;-->
<script src='/static/js/jquery.dataTables.min.js'></script>

<script src="/static/js/jquery.colorbox.min.js"></script>
<!--&lt;!&ndash; select or dropdown enhancer &ndash;&gt;-->
<script src="/static/bower_components/chosen/chosen.jquery.min.js"></script>
<!--&lt;!&ndash; notification plugin &ndash;&gt;-->
<script src="/static/js/jquery.noty.js"></script>
<!--&lt;!&ndash; library for making tables responsive &ndash;&gt;-->
<script src="/static/bower_components/responsive-tables/responsive-tables.js"></script>
<!--&lt;!&ndash; tour plugin &ndash;&gt;-->
<script src="/static/bower_components/bootstrap-tour/build/js/bootstrap-tour.min.js"></script>
<!--&lt;!&ndash; star rating plugin &ndash;&gt;-->
<script src="/static/js/jquery.raty.min.js"></script>
<!--&lt;!&ndash; for iOS style toggle switch &ndash;&gt;-->
<script src="/static/js/jquery.iphone.toggle.js"></script>
<!--&lt;!&ndash; autogrowing textarea plugin &ndash;&gt;-->
<script src="/static/js/jquery.autogrow-textarea.js"></script>
<!--&lt;!&ndash; multiple file upload plugin &ndash;&gt;-->
<script src="/static/js/jquery.uploadify-3.1.min.js"></script>
<!--&lt;!&ndash; history.js for cross-browser state change on ajax &ndash;&gt;-->
<script src="/static/js/jquery.history.js"></script>
<script src="/static/js/main.js"></script>

<script src="/static/js/tableExport/tableExport.js"></script>
<script src="/static/js/tableExport/jquery.base64.js"></script>
<!-- PNG -->
<script src="/static/js/tableExport/html2canvas.js"></script>
<!-- PDF -->
<!--
<script src="/static/js/jspdf.debug.js"></script>
<script src="/static/js/jspdf.plugin.autotable.js"></script>
<script src="/static/js/faker.min.js"></script>
<script src="/static/js/tableExport/jspdf/libs/sprintf.js"></script>
<script src="/static/js/tableExport/jspdf/jspdf.js"></script>
<script src="/static/js/tableExport/jspdf/libs/base64.js"></script>
-->
<script src="/static/js/custom.js"></script>
<script src="/static/js/sortElements.js"></script>
<script src="/static/jquery-plainoverlay/jquery.plainoverlay.min.js"></script>
<script src="/static/js/canvasjs.min.js"></script>
<script src="/static/js/bootstrap-datepicker.min.js"></script>
<script src="/static/bower_components/jQuery-table2excel/src/jquery.table2excel.js"></script>
<script type="text/javascript" src="/static/js/moment.min.js"></script>
<script type="text/javascript" src="/static/js/daterangepicker.js"></script>

    <script type="text/javascript">

    var start = moment().subtract(29, 'days');
    var end = moment();

    function cb(start, end) {
        $('#reportrange span').html(start.format('YYYY-MM-DD') + ' : ' + end.format('YYYY-MM-DD'));
    }

    $('#reportrange').daterangepicker({
        startDate: start,
        endDate: end,
        ranges: {
           'Today': [moment(), moment()],
           'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
           'Last 7 Days': [moment().subtract(6, 'days'), moment()],
           'Last 30 Days': [moment().subtract(29, 'days'), moment()],
           'This Month': [moment().startOf('month'), moment().endOf('month')],
           'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
        }
    }, cb);

    cb(start, end);
    
</script>

</html>
